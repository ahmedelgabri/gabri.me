@layer my-layer {
	:root {
		color-scheme: dark light;

		--link-color: theme('colors.blue.700');
		--link-decoration: theme('colors.blue.700/30%');
		--link-hover-bg: theme('colors.blue.100');
		--link-hover-decoration: theme('colors.blue.700');
	}

	.dark {
		--link-color: theme('colors.blue.400');
		--link-decoration: theme('colors.blue.400/30%');
		--link-hover-bg: theme('colors.blue.950');
		--link-hover-decoration: theme('colors.blue.400');
	}

	.color-amber {
		--link-color: theme('colors.amber.700');
		--link-decoration: theme('colors.amber.700/30%');
		--link-hover-bg: theme('colors.amber.100');
		--link-hover-decoration: theme('colors.amber.700');
	}

	.dark.color-amber {
		--link-color: theme('colors.amber.400');
		--link-decoration: theme('colors.amber.400/30%');
		--link-hover-bg: theme('colors.amber.950');
		--link-hover-decoration: theme('colors.amber.400');
	}

	.color-teal {
		--link-color: theme('colors.teal.700');
		--link-decoration: theme('colors.teal.700/30%');
		--link-hover-bg: theme('colors.teal.100');
		--link-hover-decoration: theme('colors.teal.700');
	}

	.dark.color-teal {
		--link-color: theme('colors.teal.400');
		--link-decoration: theme('colors.teal.400/30%');
		--link-hover-bg: theme('colors.teal.950');
		--link-hover-decoration: theme('colors.teal.400');
	}

	.color-purple {
		--link-color: theme('colors.purple.700');
		--link-decoration: theme('colors.purple.700/30%');
		--link-hover-bg: theme('colors.purple.100');
		--link-hover-decoration: theme('colors.purple.700');
	}

	.dark.color-purple {
		--link-color: theme('colors.purple.400');
		--link-decoration: theme('colors.purple.400/30%');
		--link-hover-bg: theme('colors.purple.950');
		--link-hover-decoration: theme('colors.purple.400');
	}

	/* Base typography */
	html {
		text-size-adjust: 100%;
		font-feature-settings: 'kern', 'liga', 'calt';
		text-rendering: optimizeLegibility;
	}

	body {
		line-height: 1.6;
	}

	/* Links */
	a {
		color: var(--link-color);
		--uno-apply: text-decoration-none transition-colors duration-150;
	}

	a:hover,
	a:focus,
	a:active {
		background-color: var(--link-hover-bg);
	}

	:focus {
		--uno-apply: outline-2 outline-offset-2 outline-cyan-500;
	}

	/* Images */
	img {
		--uno-apply: max-w-full;
	}

	/* Code */
	code {
		--uno-apply: rounded bg-neutral-200 px-1 py-0.5 font-mono text-[0.9em]
			leading-none 'dark:bg-neutral-800';
	}

	pre {
		--uno-apply: my-6 max-w-full overflow-auto rounded border border-neutral-300
			p-4 font-mono 'dark:border-neutral-700';
		line-height: 1;
		tab-size: 4;
	}

	pre code {
		--uno-apply: p-0 text-sm leading-none;
		background-color: transparent !important;
		color: inherit;
	}

	/* Shiki dual theme support - dark mode override */
	.dark .shiki {
		background-color: var(--shiki-dark-bg) !important;
	}

	.dark .shiki,
	.dark .shiki span {
		color: var(--shiki-dark) !important;
		font-style: var(--shiki-dark-font-style) !important;
		font-weight: var(--shiki-dark-font-weight) !important;
		text-decoration: var(--shiki-dark-text-decoration) !important;
	}

	/* Blockquotes */
	blockquote {
		--uno-apply: my-6 border-l-4 border-neutral-400 py-1 pl-5 italic
			text-neutral-600 'dark:border-neutral-600' 'dark:text-neutral-400';
	}

	blockquote > p {
		--uno-apply: mb-0;
	}

	blockquote > p + p {
		--uno-apply: mt-4;
	}

	/* Selection */
	::selection {
		--uno-apply: bg-cyan-300 text-black;
	}

	.dark ::selection {
		--uno-apply: bg-cyan-700 text-white;
	}

	/* Code block titles */
	.rehype-code-title {
		--uno-apply: mb-0 block rounded-t border border-b-0 border-neutral-300
			bg-neutral-200 px-4 py-2 'dark:border-neutral-700' 'dark:bg-neutral-800';
	}

	.rehype-code-title + pre {
		--uno-apply: mt-0 rounded-t-none;
	}

	/* Prose (MDX content) */
	.prose {
		--uno-apply: leading-relaxed;
	}

	.prose p {
		--uno-apply: mb-5;
	}

	.prose > p:first-child {
		--uno-apply: text-lg leading-relaxed text-neutral-700
			'dark:text-neutral-300';
	}

	.prose ul {
		--uno-apply: mb-6 list-disc pl-6;
	}

	.prose ol {
		--uno-apply: mb-6 list-decimal pl-6;
	}

	.prose li {
		--uno-apply: mb-2 pl-1;
	}

	.prose li > ul,
	.prose li > ol {
		--uno-apply: mt-2 mb-0;
	}

	.prose h2,
	.prose h3,
	.prose h4 {
		--uno-apply: mb-4 mt-10 font-bold tracking-tight text-neutral-900
			'dark:text-neutral-100';
	}

	.prose h2 {
		--uno-apply: text-2xl;
	}

	.prose h3 {
		--uno-apply: text-xl;
	}

	.prose h4 {
		--uno-apply: text-lg;
	}

	.prose > h2:first-child,
	.prose > h3:first-child,
	.prose > h4:first-child {
		--uno-apply: mt-0;
	}

	.prose hr {
		--uno-apply: my-10 border-neutral-300 'dark:border-neutral-700';
	}

	.prose img {
		--uno-apply: my-6 rounded;
	}

	.prose pre {
		--uno-apply: mt-0;
	}

	.prose strong {
		--uno-apply: font-semibold text-neutral-900 'dark:text-neutral-100';
	}

	.prose a {
		--uno-apply: underline underline-offset-2 decoration-1;
		text-decoration-color: var(--link-decoration);
	}

	.prose a:hover {
		text-decoration-color: var(--link-hover-decoration);
	}

	/* Tables */
	.prose table {
		--uno-apply: mb-6 w-full border-collapse text-sm;
	}

	.prose th {
		--uno-apply: border-b-2 border-r border-neutral-300 bg-neutral-100 px-3 py-2
			text-left font-semibold 'dark:border-neutral-600' 'dark:bg-neutral-800';
	}

	.prose th:last-child {
		--uno-apply: border-r-0;
	}

	.prose td {
		--uno-apply: border-b border-r border-neutral-200 px-3 py-2
			'dark:border-neutral-700';
	}

	.prose td:last-child {
		--uno-apply: border-r-0;
	}

	.prose tr:last-child td {
		--uno-apply: border-b-0;
	}

	.prose tbody tr:hover {
		--uno-apply: bg-neutral-50 'dark:bg-neutral-800/50';
	}

	/* Twitter embeds */
	.twitter-tweet {
		--uno-apply: m-0 mb-6;
	}

	/* Islamic pattern animation */
	@keyframes geometric-rotate {
		from {
			transform: translate(-50%, -50%) rotate(0deg);
		}
		to {
			transform: translate(-50%, -50%) rotate(-360deg);
		}
	}

	.islamic-pattern {
		opacity: 0.2;
		animation: geometric-rotate 60s linear infinite;
	}
}
